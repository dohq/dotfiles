# Folder hooks
folder-hook 'account.gmail.dorastone' 'source ~/.mutt/account.gmail.dorastone'
folder-hook 'account.g-news.work' 'source ~/.mutt/account.g-news.work'

# default account
source ~/.mutt/account.gmail.dorastone

# Macros for switching accounts
macro index <esc>1 '<sync-mailbox><enter-command>source ~/.mutt/account.gmail.dorastone<enter><change-folder>!<enter>'
macro index <esc>2 '<sync-mailbox><enter-command>source ~/.mutt/account.g-news.work<enter><change-folder>!<enter>'

# Basic Setting
set sendmail="/usr/bin/msmtp"
set edit_headers=yes
set thorough_search=yes
set use_from=yes
set envelope_from=yes

# use abook
set query_command="abook --mutt-query '%s'"
macro index a     "|abook --add-email\n" 'add sender to abook'
macro pager a     "|abook --add-email\n" 'add sender to abook'

# Source color Settings
source ~/.mutt/color/mutt-colors-solarized-dark-256.muttrc

# Change the following line to a different editor you prefer.
set editor = "vim"

# Sidebar Patch --------------------------------------
set sidebar_delim   = ' |'
set sidebar_visible = yes
set sidebar_width   = 30
color sidebar_new color221 color233

# Status Bar -----------------------------------------
set status_chars  = " *%A"
set status_format = "---[ Folder: %f ]---[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]---%>-%?p?( %p postponed )?---"

# Index View Options ---------------------------------
set date_format = "%m/%d"
set index_format="%Z %{%Y-%m-%d %H:%M} %-15.15L %s"
#set index_format = "[%Z]  %D  %-20.20F  %s"
set sort = threads                         # like gmail
set sort_aux = reverse-last-date-received  # like gmail
set uncollapse_jump                        # don't collapse on an unread message
set sort_re                                # thread based on regex
set reply_regexp = "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"

# Index Key Bindings ---------------------------------
bind index gg       first-entry
bind index G        last-entry
bind index R        group-reply
bind index <tab>    sync-mailbox

# Ctrl-R to mark all as read
macro index \Cr "T~U<enter><tag-prefix><clear-flag>N<untag-pattern>.<enter>" "mark all messages as read"

# Saner copy/move dialogs
macro index C "<copy-message>?<toggle-mailboxes>" "copy a message to a mailbox"
macro index M "<save-message>?<toggle-mailboxes>" "move a message to a mailbox"

# Sidebar Navigation ---------------------------------
bind index,pager <down>   sidebar-next
bind index,pager <up>     sidebar-prev
bind index,pager <right>  sidebar-open

# Pager View Options ---------------------------------
set pager_index_lines = 12 # number of index lines to show
set pager_context = 3      # number of context lines to show
set pager_stop             # don't go to next message automatically
set menu_scroll            # scroll in menus
set tilde                  # show tildes like in vim
unset markers              # no ugly plus signs
set quote_regexp = "^( {0,4}[>|:#%]| {0,4}[a-z0-9]+[>|]+)+"
auto_view text/html                                      # view html automatically
alternative_order text/plain text/enriched text/html     # save html for last

# Pager Key Bindings ---------------------------------
bind pager k  previous-line
bind pager j  next-line
bind pager gg top
bind pager G  bottom
bind pager R  group-reply

# View attachments properly.
bind attach <return> view-mailcap

macro pager \Cu "|w3m<enter>" "call urlview to open links"
